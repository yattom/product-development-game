# プロジェクト・カオス 開発計画

## TODO

- いくつかのルールについて働きをテストで確認しながらリファクタリングする
   - セットアップルール
   - ターンフロールール
   - リソース管理ルール
   - 混沌ルール
- GameState.drawCards()が勝手に捨て札を使わないよう修正
- PlaceCardRule.apply()で、置き場のカードの処理をそれぞれ分離する
- 分離したものをさらにルールとして使えるようにする
- GameStateをイミュータブルにする
- ゲームの初期化がGameContextのコンストラクタとSetupRuleに分かれてしまっているのは統合したい

## 済み

1. **ルールシステム基盤の構築**
    - ルールインターフェースとコンテキスト
    - ルール登録と適用のメカニズム
    - イベントシステム

2. **基本ゲームエンジンの実装**
    - 状態管理
    - アクション処理
    - ルール適用フロー

3. **カードシステムの実装（部分的）**
   - カードデータ構造
   - カード効果ルール

4. **カスタマイズと拡張性（部分的）**
   - 新規ルールの追加方法

## 5. 実装順序

1. **標準ルールセットの実装**
    - セットアップルール
    - ターンフロールール
    - アクションルール
    - リソース管理ルール
    - 混沌ルール
    - 勝利/敗北条件ルール

2. **カードシステムの実装（残り）**
    - デッキと手札の管理

3. **ゲーム進行フローの実装**
    - プレイヤーターン管理
    - アクション実行
    - ゲーム終了条件

## 7. テスト戦略

- **ルールのユニットテスト:** 各ルールを個別にテスト
- **ルールセットの統合テスト:** ルールの組み合わせをテスト
- **ゲームフローテスト:** 完全なゲームプレイをシミュレート
- **バリアントテスト:** 異なるルールセットでのゲーム動作を検証
- **エッジケーステスト:** 極端なゲーム状態でのルール適用をテスト

## 8. カスタマイズと拡張性

1. **ルールバリアントの作成**
    - 標準ルールの一部を置換または拡張
    - 新しいルールセットとして定義
    - ゲーム開始時に適用

2. **難易度調整**
    - 特定のルールパラメータを調整
    - 勝利/敗北条件を変更するルールを追加

3. **拡張パック対応**
    - 新カテゴリ、効果、ルールを追加
    - 既存ルールとの互換性を維持
